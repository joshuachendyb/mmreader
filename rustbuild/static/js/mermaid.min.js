// Mermaid.js v9.4.0 (压缩版)
// 此文件为 Mermaid.js 的核心功能，负责图表渲染
// 由于文件较大，这里提供一个简化版本

(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.mermaid = factory());
}(this, (function () { 
	'use strict';

	var mermaid = function mermaid(userConfig) {
		var config = {
			startOnLoad: true,
			theme: 'default',
			flowchart: {
				useMaxWidth: true,
				htmlLabels: true,
				curve: 'basis',
				diagramPadding: 20
			},
			sequence: {
				useMaxWidth: true,
				noteFont: 'normal 14px \'trebuchet ms\', verdana, arial, sans-serif',
				actorFontSize: 14,
				messageFontSize: 14,
				messageFont: 'normal 14px \'trebuchet ms\', verdana, arial, sans-serif',
				mirrorActors: true,
				bottomMarginAdj: 1,
				width: 100%
			},
			gantt: {
				titleTopMargin: 25,
				barHeight: 20,
				barGap: 4,
				topPadding: 50,
				sidePadding: 75,
				useMaxWidth: true,
				gridLineStartPadding: 8,
				fontSize: 11,
				fontFamily: '\'trebuchet ms\', verdana, arial, sans-serif',
				numberSectionStyles: 4,
				axisFormatter: [[
					['%Y-%m-%d', function(d) {
						return d;
					}]
				]]
			},
			pie: {
				displayPercentages: true,
				piePadAngle: 0,
				pieInnerRadius: 0,
				pieMargin: 0,
				pieStartAngle: 0,
				showBorder: true,
				font: '14px \'trebuchet ms\', verdana, arial, sans-serif'
			},
			journey: {
				diagramPadding: 20,
				useMaxWidth: true,
				actorFontSize: 14,
				actorFont: 'normal 14px \'trebuchet ms\', verdana, arial, sans-serif',
				sectionFontSize: 14,
				sectionFont: 'normal 14px \'trebuchet ms\', verdana, arial, sans-serif'
			},
			er: {
				diagramPadding: 20,
				useMaxWidth: true,
				fill: '#f9f9f9',
				stroke: '#666',
				strokeWidth: 1,
				font: '14px \'trebuchet ms\', verdana, arial, sans-serif'
			},
			class: {
				diagramPadding: 20,
				useMaxWidth: true,
				fill: '#f9f9f9',
				stroke: '#666',
				strokeWidth: 1,
				font: '14px \'trebuchet ms\', verdana, arial, sans-serif'
			},
			state: {
				diagramPadding: 20,
				useMaxWidth: true,
				fill: '#f9f9f9',
				stroke: '#666',
				strokeWidth: 1,
				font: '14px \'trebuchet ms\', verdana, arial, sans-serif'
			}
		};

		if (userConfig) {
			Object.assign(config, userConfig);
		}

		var graph = {
			svgs: {},
			init: function() {
				if (config.startOnLoad) {
					this.render();
				}
			},
			render: function() {
				var elements = document.querySelectorAll('[mermaid]');
				elements.forEach(function(el) {
					var content = el.textContent;
					var svg = this.renderSvg(content);
					el.innerHTML = svg;
				}.bind(this));
			},
			renderSvg: function(content) {
				// 简化实现，实际应调用Mermaid解析器
				return `<svg width='200' height='100'>\n` +
					`<text x='10' y='50' font-size="16' fill='#333'>图表</text>\n` +
					`</svg>`;
				}
			};

		return graph;
	};

	return mermaid;
})));

// 简化版本，实际应用中应使用完整库