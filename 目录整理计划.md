# MermaidReader项目目录整理计划

**创建时间**: 2026-02-12 04:45:00
**版本**: v1.0
**目的**: 整理项目目录结构，为Git版本管理和未来开发打基础

---

## 一、背景与目标

### 1.1 整理原因

| 原因 | 说明 |
|------|------|
| **版本管理** | 建立Git版本控制，需要清晰的目录结构 |
| **开发效率** | 找文件快、理解代码快、定位问题快 |
| **协作安全** | 清晰的提交历史，便于追溯和回滚 |
| **长期维护** | 清晰的目录结构降低长期维护成本 |

### 1.2 版本分支策略

| 分支 | 目录 | 版本范围 | 状态 |
|------|------|---------|------|
| **main** | gobuild/ | v1.4及以后 | 当前开发主线 |
| **web-v1.x** | web/ | v1.4以前 | 历史版本 |
| **rust-v1.2** | rustbuild/ | v1.2及以后 | 实验分支 |

### 1.3 文档分类原则

| 类别 | 特点 | Git管理 |
|------|------|--------|
| **productDoc** | 产品文档（给用户看） | ✅ 纳入 |
| **devDoc** | 开发文档（过程资料） | ✅ 纳入 |
| **notes** | 调试笔记（开发记录） | ✅ 纳入 |
| **tests** | 测试用例 | ✅ 纳入 |
| **release** | 发布产物 | ❌ 不纳入 |
| **backup** | 版本备份 | ❌ 不纳入 |

---

## 二、当前目录问题分析

### 2.1 发现的问题

#### 🔴 必须删除（有毒残留）

| 项目 | 路径 | 原因 |
|------|------|------|
| 误写文件 | `gobuild/release_20260203_v2.0.0" && cp D:2bktest...` | 命令行误写成文件 |
| 临时备份 | `gobuild/static/index.html.backup.*` (6个) | 临时备份文件 |
| 编译产物 | `gobuild/bin/`, `gobuild/build/` | 可重建 |
| 废弃文件 | `gobuild/debug-notes-v1.5.6.md` | 已标注废弃 |
| 嵌套备份 | `gobuild/backup/v1.6.20_baseline_.../gobuild/` | 嵌套导致重复 |

#### 🟡 需要整理的文件

| 当前位置 | 文件类型 | 目标位置 | 价值 |
|---------|---------|---------|------|
| 根目录/app.html | Web入口 | web/ | ✅ 核心 |
| 根目录/MD-case/ | 测试用例 | tests/ | ✅ 测试 |
| 根目录/调试笔记-*.md (7个) | 调试笔记 | notes/ | ✅ 记录 |
| gobuild/*.md (15个) | 分类整理 | 见下表 | 见下表 |
| gobuild/*.txt (3个) | 分类整理 | 见下表 | 见下表 |
| gobuild/*.sh (3个) | 构建脚本 | gobuild/ | ✅ 工具 |
| release/调试笔记-*.md | 调试笔记 | notes/ | ✅ 记录 |

---

## 三、gobuild目录文件分类详情

### 3.1 保留在gobuild/的文件（核心代码）

| 文件/目录 | 说明 | 理由 |
|----------|------|------|
| `src/main.go` | Go主程序 | 核心代码 |
| `src/export.go` | 导出功能 | 核心代码 |
| `go.mod`, `go.sum` | Go依赖管理 | 必要配置 |
| `wails.json` | Wails配置 | 框架配置 |
| `package.json` | Node配置 | 必要配置 |
| `README.md` | 项目说明 | 项目文档 |
| `version.txt` | 版本记录 | 版本追踪 |
| `build-dev.bat` | 开发构建 | 构建工具 |
| `build-release.bat` | 发布构建 | 构建工具 |
| `build.sh` | Linux构建 | 备用工具 |
| `build-dev.sh` | Git Bash构建 | 日常工具 |
| `update-version.bat` | 版本更新 | 辅助工具 |
| `frontend/` | Wails前端 | 前端代码 |
| `static/` | 静态资源 | 前端资源 |
| `release_20260131/` | v1.4.0发布版 | 历史发布 |
| `release_20260202_v1.5.6/` | v1.5.6发布版 | 历史发布 |
| `release_20260203_v2.0.0/` | v2.0.0发布版 | 历史发布 |
| `backup/` | 版本备份(50+个) | 历史备份 |

### 3.2 移到productDoc/的文件（产品文档）

| 文件 | 说明 |
|------|------|
| `docs/APP使用说明.md` | 已存在 |
| `docs/APP架构设计.md` | 已存在 |
| `docs/需求及问题记录.txt` | 已存在 |
| `docs/APP和系统陪测代码管理规则.md` | 已存在 |

### 3.3 移到devDoc/的文件（开发文档）

| 文件 | 说明 | 文档类型 |
|------|------|---------|
| `gobuild/build工具使用说明.md` | 构建工具使用指南 | 工具文档 |
| `gobuild/Mermaid错误处理代码详解.md` | 错误处理代码逐句解释 | 技术方案 |
| `gobuild/三层防御体系详细分析与方案.md` | 防御体系架构设计 | 问题分析 |
| `gobuild/代码审查报告.md` | 代码全面审查 | 审查报告 |
| `gobuild/错误说明-关于解析APP使用说明..txt` | 用户反馈问题记录 | 问题记录 |
| `gobuild/点击目录问题深度分析报告（完整版）.md` | 目录问题根因分析 | 问题分析 |
| `gobuild/v1.5.5深度分析报告.md` | v1.5.5版本分析 | 版本分析 |
| `gobuild/修改计划-v1.5.10-debug增强.md` | 调试增强计划 | 开发规划 |
| `gobuild/release_20260203_v2.0.0/发布说明.md` | v2.0.0发布记录 | 发布记录 |

### 3.4 移到notes/的文件（调试笔记）

| 文件 | 说明 |
|------|------|
| `根目录/调试笔记-2026-01-30.md` | 日常调试 |
| `根目录/调试笔记-2026-01-31.md` | 日常调试 |
| `根目录/调试笔记-2026-02-01.md` | 日常调试 |
| `根目录/调试笔记-2026-02-02.md` | 日常调试 |
| `根目录/调试笔记-2026-02-03.md` | 日常调试 |
| `根目录/调试笔记-3号UI线框图错误分析-20260203.md` | UI问题分析 |
| `根目录/调试笔记写入规则.md` | 笔记规范 |
| `gobuild/调试笔记-打包记录.md` | 打包过程 |
| `gobuild/调试笔记-v1.5.8-追加.md` | 版本记录 |
| `release/调试笔记-2026-02-03.md` | 调试记录 |

### 3.5 可以删除的文件

| 文件 | 说明 |
|------|------|
| `gobuild/debug-notes-v1.5.6.md` | 已标注废弃，内容已迁移 |
| `gobuild/nul` | 空文件，无价值 |

---

## 四、整理后目录结构

```
MermaidReader/                          ← Git仓库根目录
│
├── web/                                ← Git分支 web-v1.x (历史版本)
│   ├── app.html                        ← Web版入口文件
│   └── node_modules/                   ← Web依赖 (不纳入Git)
│
├── gobuild/                            ← Git分支 main (当前主线)
│   ├── src/                           ← Go源代码目录
│   │   ├── main.go                    ← 主程序入口
│   │   └── export.go                  ← 导出功能
│   ├── frontend/                       ← Wails前端目录
│   ├── static/                        ← 静态资源目录
│   │   ├── css/                       ← 样式文件
│   │   ├── js/                        ← 脚本文件
│   │   ├── images/                    ← 图片资源
│   │   └── index.html                 ← 主页面
│   ├── wails.json                     ← Wails配置
│   ├── package.json                   ← Node配置
│   ├── README.md                      ← 项目说明
│   ├── version.txt                    ← 版本记录
│   │
│   ├── build-dev.bat                  ← 开发构建 (CMD)
│   ├── build-release.bat              ← 发布构建 (CMD)
│   ├── build.sh                       ← Linux构建 (备用)
│   ├── build-dev.sh                   ← 开发构建 (Git Bash)
│   ├── update-version.bat             ← 版本更新工具
│   │
│   ├── release_20260131/             ← v1.4.0发布版
│   ├── release_20260202_v1.5.6/      ← v1.5.6发布版
│   ├── release_20260203_v2.0.0/       ← v2.0.0发布版
│   │
│   ├── backup/                        ← 版本备份 (不纳入Git)
│   │   ├── v1.4.0_20260131/
│   │   ├── v1.5.6_baseline_20260202_0818/
│   │   └── ... (50+个备份目录)
│   │
│   └── go.mod                        ← Go依赖管理
│   └── go.sum                        ← Go依赖锁定
│
├── rustbuild/                         ← Git分支 rust-v1.2 (实验分支)
│   ├── src/main.rs                   ← Rust源代码
│   ├── Cargo.toml                     ← Rust配置
│   ├── Cargo.lock                     ← Rust依赖锁定
│   ├── README.md                      ← 项目说明
│   ├── static/                        ← 静态资源
│   │   ├── css/
│   │   ├── js/
│   │   └── images/
│   ├── build-*.ps1                    ← 构建脚本
│   ├── package.bat                    ← 打包脚本
│   └── target/                        ← 编译产物 (不纳入Git)
│
├── productDoc/                        ← Git管理 (产品文档)
│   ├── APP使用说明.md                 ← 产品使用手册
│   ├── APP架构设计.md                 ← 产品架构说明
│   ├── 需求及问题记录.txt             ← 产品需求
│   └── APP和系统陪测代码管理规则.md    ← 规则文档
│
├── devDoc/                            ← Git管理 (开发文档)
│   ├── build工具使用说明.md           ← 构建工具使用指南
│   ├── Mermaid错误处理代码详解.md     ← 技术方案文档
│   ├── 三层防御体系详细分析与方案.md   ← 问题分析文档
│   ├── 代码审查报告.md                ← 代码审查文档
│   ├── 错误说明-关于解析APP使用说明..txt  ← 问题记录文档
│   ├── 点击目录问题深度分析报告（完整版）.md ← 问题分析文档
│   ├── v1.5.5深度分析报告.md          ← 版本分析文档
│   ├── 修改计划-v1.5.10-debug增强.md   ← 开发规划文档
│   └── 发布说明.md                     ← 发布记录文档
│
├── notes/                             ← Git管理 (调试笔记)
│   ├── 调试笔记-2026-01-30.md         ← 日常调试记录
│   ├── 调试笔记-2026-01-31.md         ← 日常调试记录
│   ├── 调试笔记-2026-02-01.md         ← 日常调试记录
│   ├── 调试笔记-2026-02-02.md         ← 日常调试记录
│   ├── 调试笔记-2026-02-03.md         ← 日常调试记录
│   ├── 调试笔记-3号UI线框图错误分析-20260203.md ← 问题分析记录
│   ├── 调试笔记写入规则.md             ← 笔记规范
│   ├── 调试笔记-打包记录.md            ← 打包过程记录
│   ├── 调试笔记-v1.5.8-追加.md         ← 版本记录
│   └── 调试笔记-2026-02-03.md         ← 调试记录
│
├── tests/                             ← Git管理 (测试用例)
│   └── MD-case/                       ← Markdown测试用例
│
├── release/                           ← 不纳入Git (发布产物)
│   ├── MermaidReader-portable.zip    ← 便携版ZIP
│   ├── MermaidReader-v1.2-portable/   ← 便携版目录
│   ├── MermaidReader-v1.2-portable.tar ← 便携版TAR
│   ├── mermaid.min.js                 ← Mermaid库
│   ├── index.html                     ← 独立HTML
│   └── v1.2-dark-mode/                ← 暗色模式资源
│
├── .gitignore                        ← Git忽略规则
└── README.md                         ← 项目主说明
```

---

## 五、.gitignore规则

```gitignore
# ===================
# 编译和构建产物
# ===================
*.exe
*.exe~
*.dll
*.so
*.dylib
*.test
*.out

# Go编译产物
bin/
build/

# Rust编译产物
target/

# ===================
# 依赖目录
# ===================
node_modules/

# ===================
# 系统文件
# ===================
.DS_Store
Thumbs.db
*.log

# ===================
# 发布产物
# ===================
release*/
*.zip
*.tar

# ===================
# 本地备份
# ===================
backup*/
*.backup.*
*.bak

# ===================
# 临时文件
# ===================
*.tmp
*.swp
*~
```

---

## 六、Git分支策略

### 6.1 分支结构

```
main (gobuild/)                    ← 当前开发主线
├── web-v1.x (web/)               ← 历史Web版本
└── rust-v1.2 (rustbuild/)        ← 实验Rust版本
```

### 6.2 标签策略

| 版本 | 标签 | 说明 |
|------|------|------|
| v1.4.0 | `release_v1.4.0` | Web版本最后一个 |
| v1.5.6 | `release_v1.5.6` | Go版本中间版本 |
| v2.0.0 | `release_v2.0.0` | 当前稳定版 |

---

## 七、执行步骤

### 第一阶段：清理有毒残留

```
步骤1: 删除误写文件
      del "gobuild/release_20260203_v2.0.0\" && cp D:2bktest..."

步骤2: 删除临时备份文件
      del gobuild/static/index.html.backup.*

步骤3: 删除编译产物
      rm -rf gobuild/bin/ gobuild/build/

步骤4: 删除嵌套备份
      rm -rf gobuild/backup/v1.6.20_baseline_20260212_042950/gobuild/

步骤5: 删除废弃文件
      del gobuild/debug-notes-v1.5.6.md
      del gobuild/nul
```

### 第二阶段：创建目录结构

```
步骤6: 创建productDoc目录
      mkdir -p productDoc

步骤7: 创建devDoc目录
      mkdir -p devDoc

步骤8: 创建notes目录 (如果不存在)
      mkdir -p notes

步骤9: 创建tests目录 (如果不存在)
      mkdir -p tests/MD-case
```

### 第三阶段：移动文件

```
步骤10: 移动Web版本
        mv app.html web/

步骤11: 移动测试用例
        mv MD-case tests/

步骤12: 移动根目录调试笔记到notes/
        mv 调试笔记-*.md notes/
        mv 调试笔记写入规则.md notes/

步骤13: 移动gobuild调试笔记到notes/
        mv gobuild/调试笔记-打包记录.md notes/
        mv gobuild/调试笔记-v1.5.8-追加.md notes/

步骤14: 移动productDoc文件(如果需要)
        cp docs/* productDoc/

步骤15: 移动开发文档到devDoc/
        mv gobuild/build工具使用说明.md devDoc/
        mv gobuild/Mermaid错误处理代码详解.md devDoc/
        mv gobuild/三层防御体系详细分析与方案.md devDoc/
        mv gobuild/代码审查报告.md devDoc/
        mv gobuild/错误说明-关于解析APP使用说明..txt devDoc/
        mv gobuild/点击目录问题深度分析报告（完整版）.md devDoc/
        mv gobuild/v1.5.5深度分析报告.md devDoc/
        mv gobuild/修改计划-v1.5.10-debug增强.md devDoc/
        cp gobuild/release_20260203_v2.0.0/发布说明.md devDoc/

步骤16: 移动release目录的调试笔记到notes/
        cp release/调试笔记-2026-02-03.md notes/

步骤17: 移动完成后删除gobuild下的.md和.txt文件
        rm gobuild/*.md
        rm gobuild/*.txt
```

### 第四阶段：创建.gitignore

```
步骤18: 创建.gitignore文件
        (使用上面定义的规则)
```

### 第五阶段：Git初始化

```
步骤19: 初始化Git仓库
        git init

步骤20: 创建分支
        git branch -M main
        git branch web-v1.x
        git branch rust-v1.2

步骤21: 添加并提交
        git add .
        git commit -m "整理目录结构，为Git管理做准备"

步骤22: 创建版本标签
        git tag v2.0.0
```

---

## 八、验证检查清单

### 8.1 文件完整性检查

- [ ] 所有核心代码文件存在
- [ ] 所有文档文件已分类移动
- [ ] 没有遗漏的调试笔记
- [ ] 没有残留的临时文件

### 8.2 目录结构检查

- [ ] web/ 目录结构正确
- [ ] gobuild/ 目录结构正确
- [ ] rustbuild/ 目录结构正确
- [ ] productDoc/ 目录结构正确
- [ ] devDoc/ 目录结构正确
- [ ] notes/ 目录结构正确
- [ ] tests/ 目录结构正确

### 8.3 Git配置检查

- [ ] .gitignore 文件存在且正确
- [ ] Git仓库已初始化
- [ ] 分支已创建
- [ ] 首次提交已完成

---

## 九、回滚方案

如果整理过程中出现问题，可以使用以下回滚方案：

```bash
# 回滚所有文件移动
git checkout HEAD -- .

# 或者删除仓库重新开始
rm -rf .git
git init
```

---

## 十、注意事项

### 10.1 执行前

- [ ] 确认所有文件已备份
- [ ] 确认计划已阅读理解
- [ ] 确认每一步的执行命令

### 10.2 执行中

- [ ] 逐步执行，不要跳跃
- [ ] 每步完成后验证
- [ ] 记录执行过程

### 10.3 执行后

- [ ] 验证目录结构
- [ ] 验证Git配置
- [ ] 测试Git操作

---

## 十一、计划版本历史

| 版本 | 日期 | 修订内容 |
|------|------|---------|
| v1.0 | 2026-02-12 04:45:00 | 初始版本 |

---

**创建时间**: 2026-02-12 04:45:00
**版本**: v1.0
